(program
 (class (Foo)
   (suite
    (def (setx self x) (suite (= ((indexed self (dot x))) x)))
    (def (bar self) (suite (return (indexed self (dot x)))))))
 (= (f) (indexed Foo (called)))
 (expr (indexed f (dot setx) (called 5)))
 (= (var1) (indexed f (dot bar) (called)))
 (expr (indexed print (called var1)))
 (expr (indexed Foo (dot setx) (called f 500)))
 (= (var2) (indexed Foo (dot bar) (called f)))
 (expr (indexed print (called var2)))
 (= ((indexed Foo (dot y))) 10)
 (= (g) (indexed Foo (called)))
 (= (var3) (indexed g (dot y)))
 (expr (indexed print (called var3)))
 (= ((indexed g (dot y))) 9)
 (expr (indexed print (called "after setting g.y to 9")))
 (= (var4) (indexed g (dot y)))
 (expr (indexed print (called var4)))
 (expr (indexed print (called "f.y should be the same to the Foo.y")))
 (expr (indexed print (called "f.y = ")))
 (= (var5) (indexed f (dot y)))
 (expr (indexed print (called var5)))
 (expr (indexed print (called "Foo.y = ")))
 (= (var6) (indexed Foo (dot y)))
 (expr (indexed print (called var6))))

